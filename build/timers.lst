ARM GAS  C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s 			page 1


   1              		.cpu cortex-m0
   2              		.arch armv6s-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 0
  12              		.eabi_attribute 18, 4
  13              		.file	"timers.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Src/timers.c"
  18              		.section	.RamFunc,"ax",%progbits
  19              		.align	1
  20              		.global	Delay
  21              		.syntax unified
  22              		.code	16
  23              		.thumb_func
  25              	Delay:
  26              	.LVL0:
  27              	.LFB42:
   1:Src/timers.c  **** #include "timers.h"
   2:Src/timers.c  **** 
   3:Src/timers.c  **** volatile int enable_counter = 0;
   4:Src/timers.c  **** volatile unsigned tickcounter = 0;
   5:Src/timers.c  **** volatile uint32_t tick2 = 0;
   6:Src/timers.c  **** 
   7:Src/timers.c  **** void RAMFUNC Delay(uint32_t delay)
   8:Src/timers.c  **** {
  28              		.loc 1 8 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
   9:Src/timers.c  ****   uint32_t tickstart = GetTick();
  33              		.loc 1 9 3 view .LVU1
  34              	.LBB6:
  35              	.LBI6:
  36              		.file 2 "Inc/timers.h"
   1:Inc/timers.h  **** #pragma once
   2:Inc/timers.h  **** 
   3:Inc/timers.h  **** #include "main.h"
   4:Inc/timers.h  **** 
   5:Inc/timers.h  **** extern volatile uint32_t uwTick;
   6:Inc/timers.h  **** extern volatile int enable_counter;
   7:Inc/timers.h  **** extern volatile unsigned tickcounter;
   8:Inc/timers.h  **** extern volatile uint32_t tick2;
   9:Inc/timers.h  **** 
  10:Inc/timers.h  **** static inline RAMFUNC uint32_t GetTick(void)
  37              		.loc 2 10 32 view .LVU2
  38              	.LBB7:
  11:Inc/timers.h  **** {
ARM GAS  C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s 			page 2


  12:Inc/timers.h  ****     return uwTick;
  39              		.loc 2 12 5 view .LVU3
  40              		.loc 2 12 12 is_stmt 0 view .LVU4
  41 0000 064B     		ldr	r3, .L5
  42 0002 1A68     		ldr	r2, [r3]
  43              	.LVL1:
  44              		.loc 2 12 12 view .LVU5
  45              	.LBE7:
  46              	.LBE6:
  10:Src/timers.c  ****   uint32_t wait = delay;
  47              		.loc 1 10 3 is_stmt 1 view .LVU6
  11:Src/timers.c  **** 
  12:Src/timers.c  ****   /* Add a freq to guarantee minimum wait */
  13:Src/timers.c  ****   if (wait < HAL_MAX_DELAY)
  48              		.loc 1 13 3 view .LVU7
  49              		.loc 1 13 6 is_stmt 0 view .LVU8
  50 0004 431C     		adds	r3, r0, #1
  51 0006 02D0     		beq	.L3
  14:Src/timers.c  ****   {
  15:Src/timers.c  ****     wait += (uint32_t)(uwTickFreq);
  52              		.loc 1 15 5 is_stmt 1 view .LVU9
  53              		.loc 1 15 13 is_stmt 0 view .LVU10
  54 0008 054B     		ldr	r3, .L5+4
  55 000a 1B78     		ldrb	r3, [r3]
  56              		.loc 1 15 10 view .LVU11
  57 000c C018     		adds	r0, r0, r3
  58              	.LVL2:
  59              	.L3:
  16:Src/timers.c  ****   }
  17:Src/timers.c  **** 
  18:Src/timers.c  ****   while((GetTick() - tickstart) < wait)
  19:Src/timers.c  ****   {
  20:Src/timers.c  ****   }
  60              		.loc 1 20 3 is_stmt 1 discriminator 1 view .LVU12
  18:Src/timers.c  ****   {
  61              		.loc 1 18 33 discriminator 1 view .LVU13
  62              	.LBB8:
  63              	.LBI8:
  10:Inc/timers.h  **** {
  64              		.loc 2 10 32 discriminator 1 view .LVU14
  65              	.LBB9:
  66              		.loc 2 12 5 discriminator 1 view .LVU15
  67              		.loc 2 12 12 is_stmt 0 discriminator 1 view .LVU16
  68 000e 034B     		ldr	r3, .L5
  69 0010 1B68     		ldr	r3, [r3]
  70              	.LBE9:
  71              	.LBE8:
  18:Src/timers.c  ****   {
  72              		.loc 1 18 20 discriminator 1 view .LVU17
  73 0012 9B1A     		subs	r3, r3, r2
  18:Src/timers.c  ****   {
  74              		.loc 1 18 33 discriminator 1 view .LVU18
  75 0014 8342     		cmp	r3, r0
  76 0016 FAD3     		bcc	.L3
  21:Src/timers.c  **** }
  77              		.loc 1 21 1 view .LVU19
  78              		@ sp needed
ARM GAS  C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s 			page 3


  79 0018 7047     		bx	lr
  80              	.L6:
  81 001a C046     		.align	2
  82              	.L5:
  83 001c 00000000 		.word	uwTick
  84 0020 00000000 		.word	uwTickFreq
  85              		.cfi_endproc
  86              	.LFE42:
  88              		.global	tick2
  89              		.section	.bss.tick2,"aw",%nobits
  90              		.align	2
  93              	tick2:
  94 0000 00000000 		.space	4
  95              		.global	tickcounter
  96              		.section	.bss.tickcounter,"aw",%nobits
  97              		.align	2
 100              	tickcounter:
 101 0000 00000000 		.space	4
 102              		.global	enable_counter
 103              		.section	.bss.enable_counter,"aw",%nobits
 104              		.align	2
 107              	enable_counter:
 108 0000 00000000 		.space	4
 109              		.text
 110              	.Letext0:
 111              		.file 3 "c:\\arm-gnu-toolchain-12.3.rel1-mingw-w64-i686-arm-none-eabi\\arm-none-eabi\\include\\mac
 112              		.file 4 "c:\\arm-gnu-toolchain-12.3.rel1-mingw-w64-i686-arm-none-eabi\\arm-none-eabi\\include\\sys
 113              		.file 5 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal.h"
ARM GAS  C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 timers.c
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:19     .RamFunc:00000000 $t
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:25     .RamFunc:00000000 Delay
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:83     .RamFunc:0000001c $d
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:93     .bss.tick2:00000000 tick2
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:90     .bss.tick2:00000000 $d
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:100    .bss.tickcounter:00000000 tickcounter
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:97     .bss.tickcounter:00000000 $d
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:107    .bss.enable_counter:00000000 enable_counter
C:\Users\kurt\AppData\Local\Temp\ccmk3drs.s:104    .bss.enable_counter:00000000 $d

UNDEFINED SYMBOLS
uwTick
uwTickFreq
